"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/schools";
exports.ids = ["pages/api/schools"];
exports.modules = {

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fschools&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cschools.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fschools&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cschools.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_schools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\schools.js */ \"(api)/./pages/api/schools.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_schools_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_schools_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/schools\",\n        pathname: \"/api/schools\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_schools_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNjaG9vbHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3NjaG9vbHMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDcUQ7QUFDckQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGlyZWN0b3J5Lz81ZWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcc2Nob29scy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NjaG9vbHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zY2hvb2xzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fschools&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cschools.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql2_promise__WEBPACK_IMPORTED_MODULE_0__);\n\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default().createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASSWORD || \"\",\n    database: process.env.DB_NAME || \"school_directory\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBRW5DLE1BQU1DLE9BQU9ELGdFQUFnQixDQUFDO0lBQzVCRyxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLE9BQU8sSUFBSTtJQUM3QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPLElBQUk7SUFDN0JDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssV0FBVyxJQUFJO0lBQ3JDQyxVQUFVUCxRQUFRQyxHQUFHLENBQUNPLE9BQU8sSUFBSTtJQUNqQ0Msb0JBQW9CO0lBQ3BCQyxpQkFBaUI7SUFDakJDLFlBQVk7QUFDZDtBQUVBLGlFQUFlZCxJQUFJQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLWRpcmVjdG9yeS8uL2xpYi9kYi5qcz8zZGM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBteXNxbCBmcm9tICdteXNxbDIvcHJvbWlzZSc7XHJcblxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcclxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8ICdyb290JyxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQgfHwgJycsXHJcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJ3NjaG9vbF9kaXJlY3RvcnknLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDBcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwb29sO1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsIndhaXRGb3JDb25uZWN0aW9ucyIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/db.js\n");

/***/ }),

/***/ "(api)/./lib/middleware.js":
/*!***************************!*\
  !*** ./lib/middleware.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runMiddleware: () => (/* binding */ runMiddleware)\n/* harmony export */ });\nconst runMiddleware = (req, res, fn)=>{\n    return new Promise((resolve, reject)=>{\n        fn(req, res, (result)=>{\n            if (result instanceof Error) {\n                return reject(result);\n            }\n            return resolve(result);\n        });\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbWlkZGxld2FyZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsZ0JBQWdCLENBQUNDLEtBQUtDLEtBQUtDO0lBQ3RDLE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxTQUFTQztRQUMzQkgsR0FBR0YsS0FBS0MsS0FBSyxDQUFDSztZQUNaLElBQUlBLGtCQUFrQkMsT0FBTztnQkFDM0IsT0FBT0YsT0FBT0M7WUFDaEI7WUFDQSxPQUFPRixRQUFRRTtRQUNqQjtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaG9vbC1kaXJlY3RvcnkvLi9saWIvbWlkZGxld2FyZS5qcz9iMTU4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBydW5NaWRkbGV3YXJlID0gKHJlcSwgcmVzLCBmbikgPT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBmbihyZXEsIHJlcywgKHJlc3VsdCkgPT4ge1xyXG4gICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVqZWN0KHJlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG4iXSwibmFtZXMiOlsicnVuTWlkZGxld2FyZSIsInJlcSIsInJlcyIsImZuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bHQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/middleware.js\n");

/***/ }),

/***/ "(api)/./lib/multer.js":
/*!***********************!*\
  !*** ./lib/multer.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst uploadDir = \"./public/schoolImages\";\n// Create directory if it doesn't exist\nif (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(uploadDir)) {\n    fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(uploadDir, {\n        recursive: true\n    });\n}\nconst storage = multer__WEBPACK_IMPORTED_MODULE_0___default().diskStorage({\n    destination: (req, file, cb)=>{\n        cb(null, uploadDir);\n    },\n    filename: (req, file, cb)=>{\n        const uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1E9);\n        cb(null, \"school-\" + uniqueSuffix + path__WEBPACK_IMPORTED_MODULE_1___default().extname(file.originalname));\n    }\n});\nconst upload = multer__WEBPACK_IMPORTED_MODULE_0___default()({\n    storage: storage,\n    limits: {\n        fileSize: 5 * 1024 * 1024\n    },\n    fileFilter: (req, file, cb)=>{\n        const allowedTypes = /jpeg|jpg|png|gif/;\n        const extname = allowedTypes.test(path__WEBPACK_IMPORTED_MODULE_1___default().extname(file.originalname).toLowerCase());\n        const mimetype = allowedTypes.test(file.mimetype);\n        if (mimetype && extname) {\n            return cb(null, true);\n        } else {\n            cb(new Error(\"Only image files are allowed!\"));\n        }\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (upload);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbXVsdGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEI7QUFDSjtBQUNKO0FBRXBCLE1BQU1HLFlBQVk7QUFFbEIsdUNBQXVDO0FBQ3ZDLElBQUksQ0FBQ0Qsb0RBQWEsQ0FBQ0MsWUFBWTtJQUM3QkQsbURBQVksQ0FBQ0MsV0FBVztRQUFFRyxXQUFXO0lBQUs7QUFDNUM7QUFFQSxNQUFNQyxVQUFVUCx5REFBa0IsQ0FBQztJQUNqQ1MsYUFBYSxDQUFDQyxLQUFLQyxNQUFNQztRQUN2QkEsR0FBRyxNQUFNVDtJQUNYO0lBQ0FVLFVBQVUsQ0FBQ0gsS0FBS0MsTUFBTUM7UUFDcEIsTUFBTUUsZUFBZUMsS0FBS0MsR0FBRyxLQUFLLE1BQU1DLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLO1FBQ25FUCxHQUFHLE1BQU0sWUFBWUUsZUFBZWIsbURBQVksQ0FBQ1UsS0FBS1UsWUFBWTtJQUNwRTtBQUNGO0FBRUEsTUFBTUMsU0FBU3RCLDZDQUFNQSxDQUFDO0lBQ3BCTyxTQUFTQTtJQUNUZ0IsUUFBUTtRQUFFQyxVQUFVLElBQUksT0FBTztJQUFLO0lBQ3BDQyxZQUFZLENBQUNmLEtBQUtDLE1BQU1DO1FBQ3RCLE1BQU1jLGVBQWU7UUFDckIsTUFBTU4sVUFBVU0sYUFBYUMsSUFBSSxDQUFDMUIsbURBQVksQ0FBQ1UsS0FBS1UsWUFBWSxFQUFFTyxXQUFXO1FBQzdFLE1BQU1DLFdBQVdILGFBQWFDLElBQUksQ0FBQ2hCLEtBQUtrQixRQUFRO1FBRWhELElBQUlBLFlBQVlULFNBQVM7WUFDdkIsT0FBT1IsR0FBRyxNQUFNO1FBQ2xCLE9BQU87WUFDTEEsR0FBRyxJQUFJa0IsTUFBTTtRQUNmO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlUixNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLWRpcmVjdG9yeS8uL2xpYi9tdWx0ZXIuanM/M2Q4MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5cclxuY29uc3QgdXBsb2FkRGlyID0gJy4vcHVibGljL3NjaG9vbEltYWdlcyc7XHJcblxyXG4vLyBDcmVhdGUgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuaWYgKCFmcy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcclxuICBmcy5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxufVxyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCB1cGxvYWREaXIpO1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjb25zdCB1bmlxdWVTdWZmaXggPSBEYXRlLm5vdygpICsgJy0nICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMUU5KTtcclxuICAgIGNiKG51bGwsICdzY2hvb2wtJyArIHVuaXF1ZVN1ZmZpeCArIHBhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe1xyXG4gIHN0b3JhZ2U6IHN0b3JhZ2UsXHJcbiAgbGltaXRzOiB7IGZpbGVTaXplOiA1ICogMTAyNCAqIDEwMjQgfSwgLy8gNU1CIGxpbWl0XHJcbiAgZmlsZUZpbHRlcjogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNvbnN0IGFsbG93ZWRUeXBlcyA9IC9qcGVnfGpwZ3xwbmd8Z2lmLztcclxuICAgIGNvbnN0IGV4dG5hbWUgPSBhbGxvd2VkVHlwZXMudGVzdChwYXRoLmV4dG5hbWUoZmlsZS5vcmlnaW5hbG5hbWUpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgY29uc3QgbWltZXR5cGUgPSBhbGxvd2VkVHlwZXMudGVzdChmaWxlLm1pbWV0eXBlKTtcclxuICAgIFxyXG4gICAgaWYgKG1pbWV0eXBlICYmIGV4dG5hbWUpIHtcclxuICAgICAgcmV0dXJuIGNiKG51bGwsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2IobmV3IEVycm9yKCdPbmx5IGltYWdlIGZpbGVzIGFyZSBhbGxvd2VkIScpKTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgdXBsb2FkO1xyXG4iXSwibmFtZXMiOlsibXVsdGVyIiwicGF0aCIsImZzIiwidXBsb2FkRGlyIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsInN0b3JhZ2UiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJ1bmlxdWVTdWZmaXgiLCJEYXRlIiwibm93IiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiZXh0bmFtZSIsIm9yaWdpbmFsbmFtZSIsInVwbG9hZCIsImxpbWl0cyIsImZpbGVTaXplIiwiZmlsZUZpbHRlciIsImFsbG93ZWRUeXBlcyIsInRlc3QiLCJ0b0xvd2VyQ2FzZSIsIm1pbWV0eXBlIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/multer.js\n");

/***/ }),

/***/ "(api)/./pages/api/schools.js":
/*!******************************!*\
  !*** ./pages/api/schools.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/db */ \"(api)/./lib/db.js\");\n/* harmony import */ var _lib_multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/multer */ \"(api)/./lib/multer.js\");\n/* harmony import */ var _lib_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/middleware */ \"(api)/./lib/middleware.js\");\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        try {\n            // Run multer middleware\n            await (0,_lib_middleware__WEBPACK_IMPORTED_MODULE_2__.runMiddleware)(req, res, _lib_multer__WEBPACK_IMPORTED_MODULE_1__[\"default\"].single(\"image\"));\n            const { name, address, city, state, contact, email } = req.body;\n            const image = req.file ? `/schoolImages/${req.file.filename}` : null;\n            // Validate required fields\n            if (!name || !address || !city || !state || !contact || !email) {\n                return res.status(400).json({\n                    error: \"All fields are required\"\n                });\n            }\n            // Insert into database\n            const [result] = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"INSERT INTO schools (name, address, city, state, contact, email, image) VALUES (?, ?, ?, ?, ?, ?, ?)\", [\n                name,\n                address,\n                city,\n                state,\n                contact,\n                email,\n                image\n            ]);\n            res.status(201).json({\n                message: \"School added successfully\",\n                schoolId: result.insertId\n            });\n        } catch (error) {\n            console.error(\"Error adding school:\", error);\n            res.status(500).json({\n                error: \"Failed to add school\",\n                details: error.message\n            });\n        }\n    } else if (req.method === \"GET\") {\n        try {\n            const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"SELECT * FROM schools ORDER BY created_at DESC\");\n            res.status(200).json(rows);\n        } catch (error) {\n            console.error(\"Error fetching schools:\", error);\n            res.status(500).json({\n                error: \"Failed to fetch schools\"\n            });\n        }\n    } else {\n        res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2Nob29scy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFnQztBQUNNO0FBQ2U7QUFFOUMsTUFBTUcsU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFO0FBRWEsZUFBZUMsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLElBQUk7WUFDRix3QkFBd0I7WUFDeEIsTUFBTVAsOERBQWFBLENBQUNLLEtBQUtDLEtBQUtQLDBEQUFhLENBQUM7WUFFNUMsTUFBTSxFQUFFVSxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRUMsS0FBSyxFQUFFLEdBQUdULElBQUlVLElBQUk7WUFDL0QsTUFBTUMsUUFBUVgsSUFBSVksSUFBSSxHQUFHLENBQUMsY0FBYyxFQUFFWixJQUFJWSxJQUFJLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEdBQUc7WUFFaEUsMkJBQTJCO1lBQzNCLElBQUksQ0FBQ1QsUUFBUSxDQUFDQyxXQUFXLENBQUNDLFFBQVEsQ0FBQ0MsU0FBUyxDQUFDQyxXQUFXLENBQUNDLE9BQU87Z0JBQzlELE9BQU9SLElBQUlhLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQTBCO1lBQ2pFO1lBRUEsdUJBQXVCO1lBQ3ZCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLE1BQU14QixxREFBVSxDQUMvQix3R0FDQTtnQkFBQ1c7Z0JBQU1DO2dCQUFTQztnQkFBTUM7Z0JBQU9DO2dCQUFTQztnQkFBT0U7YUFBTTtZQUdyRFYsSUFBSWEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJJLFNBQVM7Z0JBQ1RDLFVBQVVILE9BQU9JLFFBQVE7WUFDM0I7UUFDRixFQUFFLE9BQU9MLE9BQU87WUFDZE0sUUFBUU4sS0FBSyxDQUFDLHdCQUF3QkE7WUFDdENmLElBQUlhLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87Z0JBQXdCTyxTQUFTUCxNQUFNRyxPQUFPO1lBQUM7UUFDL0U7SUFDRixPQUFPLElBQUluQixJQUFJRSxNQUFNLEtBQUssT0FBTztRQUMvQixJQUFJO1lBQ0YsTUFBTSxDQUFDc0IsS0FBSyxHQUFHLE1BQU0vQixxREFBVSxDQUFDO1lBQ2hDUSxJQUFJYSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDUztRQUN2QixFQUFFLE9BQU9SLE9BQU87WUFDZE0sUUFBUU4sS0FBSyxDQUFDLDJCQUEyQkE7WUFDekNmLElBQUlhLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMEI7UUFDMUQ7SUFDRixPQUFPO1FBQ0xmLElBQUlhLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUNyRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLWRpcmVjdG9yeS8uL3BhZ2VzL2FwaS9zY2hvb2xzLmpzPzIyZTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBvb2wgZnJvbSAnLi4vLi4vbGliL2RiJztcclxuaW1wb3J0IHVwbG9hZCBmcm9tICcuLi8uLi9saWIvbXVsdGVyJztcclxuaW1wb3J0IHsgcnVuTWlkZGxld2FyZSB9IGZyb20gJy4uLy4uL2xpYi9taWRkbGV3YXJlJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgYXBpOiB7XHJcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFJ1biBtdWx0ZXIgbWlkZGxld2FyZVxyXG4gICAgICBhd2FpdCBydW5NaWRkbGV3YXJlKHJlcSwgcmVzLCB1cGxvYWQuc2luZ2xlKCdpbWFnZScpKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgbmFtZSwgYWRkcmVzcywgY2l0eSwgc3RhdGUsIGNvbnRhY3QsIGVtYWlsIH0gPSByZXEuYm9keTtcclxuICAgICAgY29uc3QgaW1hZ2UgPSByZXEuZmlsZSA/IGAvc2Nob29sSW1hZ2VzLyR7cmVxLmZpbGUuZmlsZW5hbWV9YCA6IG51bGw7XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgaWYgKCFuYW1lIHx8ICFhZGRyZXNzIHx8ICFjaXR5IHx8ICFzdGF0ZSB8fCAhY29udGFjdCB8fCAhZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSW5zZXJ0IGludG8gZGF0YWJhc2VcclxuICAgICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICAgICdJTlNFUlQgSU5UTyBzY2hvb2xzIChuYW1lLCBhZGRyZXNzLCBjaXR5LCBzdGF0ZSwgY29udGFjdCwgZW1haWwsIGltYWdlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICBbbmFtZSwgYWRkcmVzcywgY2l0eSwgc3RhdGUsIGNvbnRhY3QsIGVtYWlsLCBpbWFnZV1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiAnU2Nob29sIGFkZGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgICAgc2Nob29sSWQ6IHJlc3VsdC5pbnNlcnRJZFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyBzY2hvb2w6JywgZXJyb3IpO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGFkZCBzY2hvb2wnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wucXVlcnkoJ1NFTEVDVCAqIEZST00gc2Nob29scyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnKTtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocm93cyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzY2hvb2xzOicsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBzY2hvb2xzJyB9KTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJwb29sIiwidXBsb2FkIiwicnVuTWlkZGxld2FyZSIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2luZ2xlIiwibmFtZSIsImFkZHJlc3MiLCJjaXR5Iiwic3RhdGUiLCJjb250YWN0IiwiZW1haWwiLCJib2R5IiwiaW1hZ2UiLCJmaWxlIiwiZmlsZW5hbWUiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJyZXN1bHQiLCJxdWVyeSIsIm1lc3NhZ2UiLCJzY2hvb2xJZCIsImluc2VydElkIiwiY29uc29sZSIsImRldGFpbHMiLCJyb3dzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/schools.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fschools&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cschools.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();